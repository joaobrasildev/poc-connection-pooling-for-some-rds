# ============================================================================
# Prometheus Configuration
# Scrapes metrics from all proxy instances
# ============================================================================

global:
  scrape_interval: 15s
  evaluation_interval: 15s

scrape_configs:
  # Proxy instances
  - job_name: 'proxy'
    scrape_interval: 5s
    static_configs:
      - targets:
          - 'proxy-1:9090'
          - 'proxy-2:9090'
          - 'proxy-3:9090'
        labels:
          service: 'connection-pooling-proxy'

  # HAProxy stats
  - job_name: 'haproxy'
    scrape_interval: 10s
    metrics_path: '/metrics'
    static_configs:
      - targets:
          - 'haproxy:8404'
        labels:
          service: 'haproxy'

  # Prometheus self-monitoring
  - job_name: 'prometheus'
    scrape_interval: 30s
    static_configs:
      - targets: ['localhost:9090']
